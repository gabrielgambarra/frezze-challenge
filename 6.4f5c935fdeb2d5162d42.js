(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{wjX4:function(t,e,a){"use strict";a.r(e),a.d(e,"DashboardModule",(function(){return it}));var i=a("ofXK"),n=a("tyNb"),r=a("mrSG"),s=a("+0xr"),o=a("SC/V"),c=a("fXoL"),b=a("0IaG"),d=a("bTqV");let l=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Gb({type:t,selectors:[["app-cancel-order-modal"]],decls:10,vars:1,consts:[["mat-dialog-title",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(c.Sb(0,"h1",0),c.Ac(1,"Cancelar pedido"),c.Rb(),c.Sb(2,"mat-dialog-content"),c.Sb(3,"p"),c.Ac(4,"Deseja realmente cancelar o pedido?"),c.Rb(),c.Rb(),c.Sb(5,"mat-dialog-actions",1),c.Sb(6,"button",2),c.Ac(7,"N\xe3o"),c.Rb(),c.Sb(8,"button",3),c.Ac(9,"Sim"),c.Rb(),c.Rb()),2&t&&(c.Bb(8),c.kc("mat-dialog-close",!0))},directives:[b.h,b.e,b.c,d.b,b.d],styles:[""]}),t})();var u=a("f0Cb"),p=a("tmjD"),h=a("H4nM");let g=(()=>{class t{constructor(){}static translateStatus(t){switch(t){case o.b.ABERTO:return"Aberto";case o.b.CONTATAR_CLIENTE:return"Contatar cliente";case o.b.PREPARANDO:return"Preparando";case o.b.SAIU_PARA_ENTREGA:return"Saiu para entrega";case o.b.CANCELADO:return"Cancelado";case o.b.ENTREGUE:return"Entregue";case o.b.FINALIZADO:return"Finalizado";default:return"N\xe3o identificado"}}static translateFlavors(t){switch(t){case h.b.MARGUERITA:return"Marguerita";case h.b.CALABRESA:return"Calabresa";case h.b.PEPPERONI:return"Pepperoni";case h.b.FRANGO_COM_CATUPIRY:return"Frango Com Catupiry";case h.b.PORTUGUESA:return"Portuguesa";case h.b.QUATRO_QUEIJOS:return"Quatro queijos";default:return"N\xe3o identificado"}}static translateCrusts(t){switch(t){case h.a.FINA:return"Fina";case h.a.GROSSA:return"Grossa";default:return"N\xe3o identificado"}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),m=(()=>{class t{transform(t,e){switch(e){case"status":return g.translateStatus(t);case"flavor":return g.translateFlavors(t);case"crust":return g.translateCrusts(t);default:return t}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=c.Lb({name:"translate",type:t,pure:!0}),t})();function f(t,e){if(1&t&&(c.Sb(0,"p"),c.Ac(1),c.fc(2,"translate"),c.Rb()),2&t){const t=c.ec().$implicit;c.Bb(1),c.Cc("Sabor 2: ",c.hc(2,1,t.secondaryFlavor,"flavor"),"")}}function A(t,e){if(1&t&&(c.Qb(0),c.Sb(1,"p"),c.Ac(2),c.Rb(),c.Sb(3,"p"),c.Ac(4),c.Rb(),c.Sb(5,"p"),c.Ac(6),c.Rb(),c.Sb(7,"p"),c.Ac(8),c.fc(9,"translate"),c.Rb(),c.Sb(10,"p"),c.Ac(11),c.Rb(),c.Sb(12,"p"),c.Ac(13),c.fc(14,"translate"),c.Rb(),c.zc(15,f,3,4,"p",4),c.Sb(16,"p"),c.Ac(17),c.Rb(),c.Pb()),2&t){const t=e.$implicit,a=e.index;c.Bb(2),c.Cc("Pizza ",a+1,""),c.Bb(2),c.Cc("Tamanho: ",t.size,""),c.Bb(2),c.Cc("Tipo: ",t.halfNHalf?"Metade / Metade":"Inteira",""),c.Bb(2),c.Cc("Borda: ",c.hc(9,9,t.crust,"crust"),""),c.Bb(3),c.Cc("Molho extra: ",t.extraSauce?"Sim":"N\xe3o",""),c.Bb(2),c.Dc("",t.halfNHalf?"Sabor 1":"Sabor",": ",c.hc(14,12,t.mainFlavor,"flavor"),""),c.Bb(2),c.kc("ngIf",t.halfNHalf),c.Bb(2),c.Cc("Observa\xe7\xf5es: ",t.note,"")}}let S=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}ngOnInit(){console.log(this.data)}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(b.g),c.Mb(b.a))},t.\u0275cmp=c.Gb({type:t,selectors:[["app-details-modal"]],decls:33,vars:16,consts:[["mat-dialog-title",""],[4,"ngFor","ngForOf"],["align","end"],["mat-button","",3,"click"],[4,"ngIf"]],template:function(t,e){1&t&&(c.Sb(0,"h1",0),c.Ac(1),c.Rb(),c.Nb(2,"mat-divider"),c.Sb(3,"mat-dialog-content"),c.Sb(4,"h3"),c.Ac(5,"Cliente:"),c.Rb(),c.Sb(6,"p"),c.Ac(7),c.Rb(),c.Sb(8,"p"),c.Ac(9),c.Rb(),c.Sb(10,"p"),c.Ac(11),c.Rb(),c.Sb(12,"p"),c.Ac(13),c.Rb(),c.Nb(14,"mat-divider"),c.Sb(15,"h3"),c.Ac(16,"Pizza(s):"),c.Rb(),c.zc(17,A,18,15,"ng-container",1),c.Nb(18,"mat-divider"),c.Sb(19,"h3"),c.Ac(20,"Entrega:"),c.Rb(),c.Sb(21,"p"),c.Ac(22),c.fc(23,"mask"),c.Rb(),c.Sb(24,"p"),c.Ac(25),c.Rb(),c.Sb(26,"p"),c.Ac(27),c.Rb(),c.Sb(28,"p"),c.Ac(29),c.Rb(),c.Rb(),c.Sb(30,"mat-dialog-actions",2),c.Sb(31,"button",3),c.ac("click",(function(){return e.dialogRef.close()})),c.Ac(32,"Fechar"),c.Rb(),c.Rb()),2&t&&(c.Bb(1),c.Cc("Pedido n\xb0 ",e.data.id,""),c.Bb(6),c.Cc("CPF: ",e.data.client.identityId,""),c.Bb(2),c.Cc("Nome: ",e.data.client.fullName,""),c.Bb(2),c.Cc("Telefone: ",e.data.client.clientContacts.phone,""),c.Bb(2),c.Cc("E-mail: ",e.data.client.clientContacts.email,""),c.Bb(4),c.kc("ngForOf",e.data.pizzas),c.Bb(5),c.Cc("CEP: ",c.hc(23,13,e.data.client.clientAddress.zipCode,"00000-000"),""),c.Bb(3),c.Ec(" Endere\xe7o: ",e.data.client.clientAddress.streetAddress,", ",e.data.client.clientAddress.number,". ",e.data.client.clientAddress.neighborhood," "),c.Bb(2),c.Cc("Complemento: ",e.data.client.clientAddress.complement,""),c.Bb(2),c.Dc("Cidade/Estado: ",e.data.client.clientAddress.city," - ",e.data.client.clientAddress.state,""))},directives:[b.h,u.a,b.e,i.j,b.c,d.b,i.k],pipes:[p.b,m],styles:["mat-divider[_ngcontent-%COMP%]{margin:15px 0}"]}),t})();var R=a("DR4/"),C=a("dNgK"),O=a("kmnG"),P=a("d3UM"),v=a("3Pt+"),w=a("FKr1");function E(t,e){if(1&t&&(c.Sb(0,"mat-option",6),c.Ac(1),c.Rb()),2&t){const t=e.$implicit;c.kc("value",t.value),c.Bb(1),c.Cc(" ",t.view," ")}}let N=(()=>{class t{constructor(t,e,a,i){this.dialogRef=t,this.data=e,this.orderService=a,this.snackBar=i,this.statusTypes=[]}ngOnInit(){this.newStatus=this.data.status,this.buildPossiblesStatus()}updateStatus(){this.data.status=this.newStatus,this.orderService.updateOrderStatus(this.data).subscribe(t=>{202==t.status&&this.snackBar.open(t.errors[0],"OK!",{duration:5e3,panelClass:["feedback-error"]}),200==t.status&&this.snackBar.open("Status atualizado!","OK!",{duration:5e3,panelClass:["feedback"]}),this.dialogRef.close()})}buildPossiblesStatus(){switch(this.data.status){case o.b.ABERTO:this.statusTypes.push({value:o.b.ABERTO,view:"Aberto"},{value:o.b.CONTATAR_CLIENTE,view:"Contatar cliente"},{value:o.b.PREPARANDO,view:"Preparando"},{value:o.b.CANCELADO,view:"Cancelado"});break;case o.b.CONTATAR_CLIENTE:this.statusTypes.push({value:o.b.CONTATAR_CLIENTE,view:"Contatar cliente"},{value:o.b.PREPARANDO,view:"Preparando"},{value:o.b.CANCELADO,view:"Cancelado"});break;case o.b.PREPARANDO:this.statusTypes.push({value:o.b.PREPARANDO,view:"Preparando"},{value:o.b.SAIU_PARA_ENTREGA,view:"Saiu para entrega"},{value:o.b.CANCELADO,view:"Cancelado"});break;case o.b.SAIU_PARA_ENTREGA:this.statusTypes.push({value:o.b.SAIU_PARA_ENTREGA,view:"Saiu para entrega"},{value:o.b.ENTREGUE,view:"Entregue"});break;case o.b.ENTREGUE:this.statusTypes.push({value:o.b.ENTREGUE,view:"Entregue"},{value:o.b.FINALIZADO,view:"Finalizado"})}}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(b.g),c.Mb(b.a),c.Mb(R.a),c.Mb(C.a))},t.\u0275cmp=c.Gb({type:t,selectors:[["app-new-status-modal"]],decls:14,vars:3,consts:[["mat-dialog-title",""],["name","new_status",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"click"],[3,"value"]],template:function(t,e){1&t&&(c.Sb(0,"h1",0),c.Ac(1),c.Rb(),c.Nb(2,"mat-divider"),c.Sb(3,"mat-dialog-content"),c.Sb(4,"mat-form-field"),c.Sb(5,"mat-label"),c.Ac(6,"Novo status do pedido"),c.Rb(),c.Sb(7,"mat-select",1),c.ac("ngModelChange",(function(t){return e.newStatus=t})),c.zc(8,E,2,2,"mat-option",2),c.Rb(),c.Rb(),c.Rb(),c.Sb(9,"mat-dialog-actions",3),c.Sb(10,"button",4),c.Ac(11,"Cancel"),c.Rb(),c.Sb(12,"button",5),c.ac("click",(function(){return e.updateStatus()})),c.Ac(13,"Atualizar"),c.Rb(),c.Rb()),2&t&&(c.Bb(1),c.Cc("Pedido n\xb0 ",e.data.id,""),c.Bb(6),c.kc("ngModel",e.newStatus),c.Bb(1),c.kc("ngForOf",e.statusTypes))},directives:[b.h,u.a,b.e,O.c,O.g,P.a,v.j,v.m,i.j,b.c,d.b,b.d,w.o],styles:["mat-divider[_ngcontent-%COMP%]{margin:10px 0}"]}),t})();var D=a("wd/R"),B=a("AytR"),T=a("l207"),k=a("tk/3");let y=(()=>{class t{constructor(t){this.http=t,this.orderUrl=B.a.apiUrl+T.a.ORDERS,this.today=D(new Date).format("YYYY-MM-DD"),this.nextDay=(new Date).setDate((new Date).getDate()+1),this.tomorow=D(this.nextDay).format("YYYY-MM-DD")}getOrdersByStatusPreparando(){return this.http.get(`${this.orderUrl}?registeredStartDate=${this.today}&registeredEndDate=${this.tomorow}&status=PREPARANDO`)}getOrdersScheduleds(){return this.http.get(`${this.orderUrl}?scheduledStartDate=${this.today}&scheduledEndDate=${this.tomorow}&orderBy=registeredIn`)}getOrdersOfDay(t){return this.http.get(`${this.orderUrl}?registeredStartDate=${this.today}&registeredEndDate=${this.tomorow}&page=${t}&size=10&orderBy=registeredIn`)}}return t.\u0275fac=function(e){return new(e||t)(c.Wb(k.b))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var I=a("XiUz"),z=a("Wp6s"),M=a("M9IT"),_=a("Qu3c"),L=a("NFeN");const x=["paginator"];function F(t,e){1&t&&(c.Sb(0,"th",15),c.Ac(1," No. "),c.Rb())}function U(t,e){if(1&t&&(c.Sb(0,"td",16),c.Ac(1),c.Rb()),2&t){const t=e.$implicit;c.Bb(1),c.Cc(" ",t.id," ")}}function $(t,e){1&t&&(c.Sb(0,"th",15),c.Ac(1," Cliente "),c.Rb())}function G(t,e){if(1&t&&(c.Sb(0,"td",16),c.Ac(1),c.Rb()),2&t){const t=e.$implicit;c.Bb(1),c.Cc(" ",t.client.fullName," ")}}function Q(t,e){1&t&&(c.Sb(0,"th",15),c.Ac(1," Status "),c.Rb())}function j(t,e){if(1&t&&(c.Sb(0,"td",16),c.Ac(1),c.fc(2,"translate"),c.Rb()),2&t){const t=e.$implicit;c.Bb(1),c.Cc(" ",c.hc(2,1,t.status,"status")," ")}}function Y(t,e){1&t&&(c.Sb(0,"th",15),c.Ac(1," A\xe7\xf5es "),c.Rb())}function K(t,e){if(1&t){const t=c.Tb();c.Qb(0),c.Sb(1,"button",19),c.ac("click",(function(){c.rc(t);const e=c.ec().$implicit;return c.ec().changeOrderStatus(e)})),c.Sb(2,"mat-icon"),c.Ac(3,"update"),c.Rb(),c.Rb(),c.Pb()}2&t&&(c.Bb(1),c.kc("matTooltipPosition","left"))}function H(t,e){if(1&t){const t=c.Tb();c.Qb(0),c.Sb(1,"button",20),c.ac("click",(function(){c.rc(t);const e=c.ec().$implicit;return c.ec().cancelOrder(e)})),c.Sb(2,"mat-icon"),c.Ac(3,"close"),c.Rb(),c.Rb(),c.Pb()}2&t&&(c.Bb(1),c.kc("matTooltipPosition","left"))}function J(t,e){if(1&t){const t=c.Tb();c.Sb(0,"td",16),c.Qb(1),c.Sb(2,"button",17),c.ac("click",(function(){c.rc(t);const a=e.$implicit;return c.ec().showOrderDetails(a)})),c.Sb(3,"mat-icon"),c.Ac(4,"description"),c.Rb(),c.Rb(),c.zc(5,K,4,1,"ng-container",18),c.zc(6,H,4,1,"ng-container",18),c.Pb(),c.Rb()}if(2&t){const t=e.$implicit;c.Bb(2),c.kc("matTooltipPosition","left"),c.Bb(3),c.kc("ngIf","CANCELADO"!=t.status&&"FINALIZADO"!=t.status),c.Bb(1),c.kc("ngIf","CANCELADO"!=t.status&&"SAIU_PARA_ENTREGA"!=t.status&&"FINALIZADO"!=t.status&&"ENTREGUE"!=t.status)}}function X(t,e){1&t&&c.Nb(0,"tr",21)}function Z(t,e){1&t&&c.Nb(0,"tr",22)}const V=function(){return[10]},q=function(){return["/new-order"]},W=[{path:"",children:[{path:"",component:(()=>{class t{constructor(t,e,a,i){this.dashboardService=t,this.dialog=e,this.orderService=a,this.snackBar=i,this.displayedColumns=["id","client","status","actions"],this.dataSource=new s.k([]),this.page=0,this.size=0,this.totalElements=0}ngOnInit(){this.getOrdersByStatusPreparando(),this.getOrdersScheduleds(),this.setPageSize(),this.getOrdersOfDay()}ngAfterViewInit(){return Object(r.a)(this,void 0,void 0,(function*(){setTimeout(()=>{this.configurePaginator()},0)}))}configurePaginator(){this.paginator&&(this.paginator._intl.itemsPerPageLabel="Itens por p\xe1gina",this.paginator._intl.firstPageLabel="Primeira p\xe1gina",this.paginator._intl.nextPageLabel="Pr\xf3xima p\xe1gina",this.paginator._intl.previousPageLabel="P\xe1gina anterior",this.paginator._intl.lastPageLabel="\xdaltima p\xe1gina",this.paginator._intl.getRangeLabel=this.getPortugueseRangeLabel,this.paginator.page.subscribe(t=>{this.size=t.pageSize,this.page=t.pageIndex,this.getOrdersOfDay()}))}setPageSize(){this.size=10}getPortugueseRangeLabel(t,e,a){if(0===a||0===e)return"0 de "+a;const i=t*e;return`${i+1} - ${i<(a=Math.max(a,0))?Math.min(i+e,a):i+e} de ${a}`}getOrdersByStatusPreparando(){this.dashboardService.getOrdersByStatusPreparando().subscribe(t=>{this.totalOrdersPreparando=t.data.length})}getOrdersScheduleds(){this.dashboardService.getOrdersScheduleds().subscribe(t=>{this.totalOrdersScheduleds=t.data.length})}getOrdersOfDay(){this.dashboardService.getOrdersOfDay(this.page).subscribe(t=>{this.dataSource=new s.k(t.data),this.totalElements=t.data.length,this.setPaginatorOptions()})}setPaginatorOptions(){this.paginator&&(this.paginator.pageIndex=this.page,this.paginator.length=this.totalElements)}showOrderDetails(t){this.dialog.open(S,{width:"70%",data:t})}changeOrderStatus(t){this.dialog.open(N,{width:"300px",data:t}).afterClosed().subscribe(t=>{this.ngOnInit()})}cancelOrder(t){this.dialog.open(l,{width:"300px"}).afterClosed().subscribe(e=>{e&&(t.status=o.b.CANCELADO,this.orderService.updateOrderStatus(t).subscribe(t=>{202==t.status&&this.snackBar.open(t.errors[0],"OK!",{duration:5e3,panelClass:["feedback-error"]}),200==t.status&&this.snackBar.open("Status atualizado!","OK!",{duration:5e3,panelClass:["feedback"]})}))})}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(y),c.Mb(b.b),c.Mb(R.a),c.Mb(C.a))},t.\u0275cmp=c.Gb({type:t,selectors:[["app-welcome"]],viewQuery:function(t,e){var a;1&t&&c.vc(x,!0),2&t&&c.oc(a=c.bc())&&(e.paginator=a.first)},decls:28,vars:10,consts:[["fxLayout","row","fxLayoutAlign","space-between center","fxLayout.lt-sm","column"],["fxFlex",""],[1,"mat-elevation-z8","table-container"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","client"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize"],["paginator",""],["mat-fab","","color","primary","matTooltip","Novo pedido",1,"float",3,"routerLink"],["mat-header-cell",""],["mat-cell",""],["mat-mini-fab","","color","primary","matTooltip","Detalhes",3,"matTooltipPosition","click"],[4,"ngIf"],["mat-mini-fab","","color","primary","matTooltip","Atualizar pedido",3,"matTooltipPosition","click"],["mat-mini-fab","","color","warn","matTooltip","Cancelar",3,"matTooltipPosition","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Sb(1,"mat-card",1),c.Ac(2),c.Rb(),c.Sb(3,"mat-card",1),c.Ac(4),c.Rb(),c.Rb(),c.Sb(5,"h2"),c.Ac(6,"Pedidos do dia"),c.Rb(),c.Sb(7,"div",2),c.Sb(8,"table",3),c.Qb(9,4),c.zc(10,F,2,0,"th",5),c.zc(11,U,2,1,"td",6),c.Pb(),c.Qb(12,7),c.zc(13,$,2,0,"th",5),c.zc(14,G,2,1,"td",6),c.Pb(),c.Qb(15,8),c.zc(16,Q,2,0,"th",5),c.zc(17,j,3,4,"td",6),c.Pb(),c.Qb(18,9),c.zc(19,Y,2,0,"th",5),c.zc(20,J,7,3,"td",6),c.Pb(),c.zc(21,X,1,0,"tr",10),c.zc(22,Z,1,0,"tr",11),c.Rb(),c.Nb(23,"mat-paginator",12,13),c.Rb(),c.Sb(25,"a",14),c.Sb(26,"mat-icon"),c.Ac(27,"add"),c.Rb(),c.Rb()),2&t&&(c.Bb(2),c.Dc(" ",e.totalOrdersPreparando>1?"Pedidos em preparo: ":"Pedido em preparo: "," ",e.totalOrdersPreparando," "),c.Bb(2),c.Cc(" Pedidos agendados para hoje: ",e.totalOrdersScheduleds," "),c.Bb(4),c.kc("dataSource",e.dataSource),c.Bb(13),c.kc("matHeaderRowDef",e.displayedColumns),c.Bb(1),c.kc("matRowDefColumns",e.displayedColumns),c.Bb(1),c.kc("pageSize",c.lc(8,V)),c.Bb(2),c.kc("routerLink",c.lc(9,q)))},directives:[I.c,I.b,z.a,I.a,s.j,s.c,s.e,s.b,s.g,s.i,M.a,d.a,n.c,_.a,L.a,s.d,s.a,d.b,i.k,s.f,s.h],pipes:[m],styles:["mat-card[_ngcontent-%COMP%]{max-width:300px}h2[_ngcontent-%COMP%]{margin:16px 0}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px}.float[_ngcontent-%COMP%]{position:fixed;bottom:40px;right:40px}"]}),t})()}]}];var tt=a("jAig"),et=a("YUcS"),at=a("iTUp");let it=(()=>{class t{}return t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({factory:function(e){return new(e||t)},imports:[[i.c,n.d.forChild(W),p.c.forRoot(),tt.a,et.a,v.e,v.o,at.a]]}),t})()}}]);